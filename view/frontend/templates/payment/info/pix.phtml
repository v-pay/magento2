<?php

/**
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade this extension to newer
 * version in the future.
 *
 * @category    VirtualPay
 * @package     VirtualPay_Payment
 * @copyright   Copyright (c) VirtualPay
 */

/**
 * @var \VirtualPay\Payment\Block\Info\Pix $block
 * @see \Magento\Payment\Block\Info
 */

/** @var \Magento\Framework\Escaper $escaper */

$specificInfo = $block->getSpecificInformation();
$title = $block->escapeHtml($block->getMethod()->getTitle());
$payment = $block->getInfo();
$emv = $block->getEmv();
$qrCodeImage = $block->getQRCodeImage();
?>
<dl class="payment-method virtualpay-content">

    <dt class="title">
        <?= $block->escapeHtml($title) ?>
    </dt>
    <dd class="content">
        <div class="virtualpay-pix pix">
            <div class="pix-barcode-container">
                <div class="pix-img-code">
                    <?php if ($qrCodeImage): ?>
                        <img alt="<?= $block->escapeHtml(__('QRCode')) ?>" src="<?= $qrCodeImage ?>" class="virtualpay-pix-qrcode" />
                    <?php endif; ?>
                    <div class="pix-qrcode"><?= $emv ?></div>
                </div>
                <button class="pix-copy-button"
                        data-text="<?= $block->escapeHtml(__('Copied!')) ?>"
                        onclick="virtualpayVp.copyCode(this, '.pix-qrcode', false)">
                    <?= $block->escapeHtml(__('Copy code')) ?>
                </button>
            </div>
        </div>
    </dd>
</dl>
<?= $block->getChildHtml() ?>


<style>
    .pix-barcode-container {
        margin-top:10px;
    }
    .pix-img-code{
        max-width: 180px;
        margin: auto;
    }
    .pix-qrcode {
        overflow-wrap: break-word;
    }
    .pix-copy-button {
        margin: 10px auto;
    }
    .virtualpay-content {
        text-align: center;
    }

    .virtualpay-content .title {
        font-size: 2.5rem;
    }
</style>
